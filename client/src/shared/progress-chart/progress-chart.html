<div class="bg-base-100 rounded-lg shadow p-6">
  <h3 class="text-xl font-bold mb-4 text-gray-800">
    {{ chartTitle }}
  </h3>

  <div class="relative mx-auto" [style.height]="height" [style.width]="width">
    <canvas baseChart 
      [datasets]="pieChartDatasets" 
      [labels]="pieChartLabels" 
      [options]="pieChartOptions"
      [type]="pieChartType">
    </canvas>
  </div>
  @if (showLegend && pieChartLabels.length > 0 && pieChartDatasets.length > 0) {
  @for ( label of this.pieChartLabels; track $index) {
  <div class="mt-6 space-y-2">
    <div class="flex items-center gap-3 py-2">
      <span class="w-4 h-4 rounded-full" [ngStyle]="{'background-color': getBackgroundColor($index)}">
      </span>
      <span class="flex-1 text-gray-600">{{ label }}:</span>
      <span class="font-semibold text-gray-800">
        {{ pieChartDatasets[0].data[$index] }}
      </span>
    </div>

    <div class="flex justify-between items-center mt-4 pt-4 border-t">
      <div class="text-lg font-semibold">
        Totaal: {{ totalItems }} items
      </div>
      <div class="text-lg font-bold text-primary">
        {{ completionPercentage }}% voltooid
      </div>
    </div>
  </div>
  }
  }


</div>